<i class="tiny material-icons">chevron_left</i><span><%= link_to "戻る", :back, class: "link-title" %></span>

<div class="row">
  <div class="col s6 push-1">
    <div class="card-panel">
      <div class="right-align"><small>投稿日: <%= l @article.created_at, format: :short %></small></div>
      <div class="right-align"><small>更新日: <%= l @article.updated_at, format: :short %></small></div>
      <h5><%= @article.title %></h5>
      <p><%= @article.description %></p>
    </div>
    <div>
      <% if @current_user && @current_user.admin %>
        <%= link_to edit_article_path(@article), class: "waves-effect waves-light btn-small" do %>
          <i class="material-icons left">update</i>編集
        <% end %>
      <% end %>
      <% if @current_user && @current_user.admin %>
        <%= link_to article_path(@article), data: { turbo_method: :delete, turbo_confirm: "削除してよろしいでしょうか？" }, class: "waves-effect waves-light btn-small" do %>
          <i class="material-icons left">delete_forever</i>削除
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="col s6 push-1">
    <h5 class="card-panel grey lighten-2 center white-text" id="chat-space">Chat space</h5>
    <ul class="card-panel grey lighten-2" id="message_list">
      <%= render @messages %>
    </ul>
      <%= form_with url: "/message/#{@article.id}", scope: :message do |f| %>
        <div class="card-panel col s12 row grey lighten-2">
          <div class="col s9 push-s1">
            <%= f.text_field :content, id: "message_text" %>
          </div>
          <%= button_tag type: "submit", class: "btn waves-effect waves-light col push-s1", id: "message_button", disabled: @current_user ? false: true do %>
            <i class="material-icons">chat</i>
          <% end %>
        </div>
      <% end %>
      <% if !@current_user %>
          <p>＊書き込みにはログインが必要です</p>
      <% end %>
  </div>
</div>
